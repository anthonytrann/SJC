<html lang="en">

<head>
  <title>SJC Add Community</title>
  </style>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- Custom styles for this template -->
  <link rel="shortcut icon" href=http://www.freshdesignweb.com/wp-content/themes/fv24/images/icon.ico />
  <!--<link rel="stylesheet" type="text/css" href="stylesheets/addCandidate.css" media="all" />
  -->
</head>

<body data-gr-c-s-loaded="true">

  <% include navbar.ejs %>

  <div class="jumbotron">

    <h1>Add Community</h1>

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
      Import Candidates
    </button>


    <form method="post">

      <div class="col-md-12">
        <label for="inputCommunityAddress" hidden>Community Address</label>
        <div class="form-group" id="inputCommunityAddress">
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="inputCommunityName">Community Name</label>
              <input type="text" class="form-control" id="inputCommunityName" name="communityName" required>
            </div>
            <div class="form-group col-md-4">
              <label for="inputCommunitySaint">Patron Saint</label>
              <input type="text" class="form-control" id="inputCommunitySaint" name="communitySaint" required>
            </div>
            <div class="form-group col-md-4">
              <label for="inputCommunityPhone">Phone Number</label>
              <input type="text" class="form-control" id="inputCommunityPhone" name="communityPhone" required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-2">
              <label for="inputHouseNumber2">No.</label>
              <input type="text" class="form-control" id="inputHouseNumber2" placeholder="House Number"
                name="houseNumber2" required>
            </div>
            <div class="form-group col-md-10">
              <label for="inputStreet2">Street</label>
              <input type="text" class="form-control" id="inputStreet2" placeholder="Street Name" name="street2"
                required>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="inputWard2">Ward</label>
              <input type="text" class="form-control" id="inputWard2" name="ward2" required>
            </div>
            <div class="form-group col-md-6">
              <label for="inputDistrict2">District</label>
              <input type="text" class="form-control" id="inputDistrict2" name="district2" required>
            </div>
            <div class="form-group col-md-6">
              <label for="inputCity2">City</label>
              <input type="text" class="form-control" id="inputCity2" name="city2" required>
            </div>
          </div>
        </div>
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-primary">Add</button>
      </div>
    </form>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Import Communities via CSV</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form id="fileForm">
            <div class="form-group">
              <label for="file">
                <h4>Import Communities from CSV</h4>
              </label>
              <input type="file" class="form-control-file" id="file">
            </div>
            <button type="button" onclick="importFile()" id="importAddButton" class="btn btn-primary">Add</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    function importFile() {
      var formData = new FormData();
      formData.append('file', document.querySelector('#file').files[0]);

      $.ajax({
        url: '/addcommunity/import',
        type: 'POST',
        data: formData,
        processData: false,  // tell jQuery not to process the data
        contentType: false,  // tell jQuery not to set contentType
        success: function (data) {
          window.location.pathname = '/communities'
          console.log(data.message);
        },
        error: function (err) {
          console.log("err: " + err);
        }
      });
    }

  </script>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
</body>