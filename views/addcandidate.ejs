<html lang="en">

<head>
  <title>SJC Add Candidate</title>
  </style>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!-- Custom styles for this template -->
  <link rel="shortcut icon" href=http://www.freshdesignweb.com/wp-content/themes/fv24/images/icon.ico />
  <!--<link rel="stylesheet" type="text/css" href="stylesheets/addCandidate.css" media="all" />
  -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>

<body data-gr-c-s-loaded="true">

  <% include navbar.ejs %>

  <div class="jumbotron">

    <h2>Add Candidate</h2>

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
      Import Candidates
    </button>


    <form id="individualForm" class="text-center" method="post">

      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputSaint">Patron Saint: </label>
          <input type="text" class="form-control" id="inputSaint" placeholder="Patron Saint" name="patronSaint"
            required>
          <div class="invalid-tooltip">
            Please enter a parton saint
          </div>
        </div>
        <div class="form-group col-md-4">
          <label for="inputSurnameMiddlename">Surname and Middlename: </label>
          <input type="text" class="form-control" id="inputSurnameMiddlename" placeholder="Surname + Middlename"
            name="surnameMiddlename" required>
          <div class="invalid-tooltip">
            Please enter a surname and middlename
          </div>
        </div>
        <div class="form-group col-md-4">
          <label for="inputFirstname">Firstname: </label>
          <input type="text" class="form-control" id="inputFirstname" placeholder="Firstname" name="firstname" required>
          <div class="invalid-tooltip">
            Please enter a firstname
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-4" data-enter="datepicker">
          <label for="inputDob">Date of Birth</label>
          <input type="date" class="form-control" id="inputDob" name="dob" required>
        </div>
        <div class="form-group col-md-4">
          <label for="inputEmail">Email</label>
          <input type="email" class="form-control" id="inputEmail" placeholder="Email" name="email" required>
        </div>
        <div class="form-group col-md-4">
          <label for="inputPhone">Phone Number</label>
          <input type="text" class="form-control" id="inputPhone" placeholder="Phone Number" name="phoneNumber"
            required>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputUniversity">University</label>
          <input type="text" class="form-control" id="inputUniversity" placeholder="University" name="university"
            required>
        </div>
        <div class="form-group col-md-4">
          <label for="inputMajor">Specialised Major</label>
          <input type="text" class="form-control" id="inputMajor" placeholder="Specialised Major" name="major" required>
        </div>
        <div class="form-group col-md-4">
          <label for="inputEducationStatus">Education Status</label>
          <select id="inputEducationStatus" class="form-control" name="educationStatus" required>
            <option selected>Graduated</option>
            <option>Freshman</option>
            <option>Sophomore</option>
            <option>Junior</option>
            <option>Senior</option>
          </select>
        </div>
      </div>

      <div class="row justify-content-around">
        <div class="form-group col-md-4">
          <label for="inputFormator">Formator</label>
          <input type="text" class="form-control" id="inputFormator" placeholder="Formator" name="formator">
        </div>
        <div class="form-group col-md-4">
          <label for="inputSpiritualDirector">Spiritual Director</label>
          <input type="text" class="form-control" id="inputSpiritualDirector" placeholder="Spiritual Director"
            name="spiritualDirector">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="inputType">Candidacy Type</label>
          <select id="inputType" class="form-control" name="candidacyType" required>
            <option selected>Interior</option>
            <option>Exterior</option>
            <option>Pre-Novice</option>
            <option>Ex-Candidate</option>
          </select>
        </div>
        <div class="form-group col-md-4">
          <label for="inputCandidacyDate">Date Entered Candidacy</label>
          <input type="date" class="form-control" id="inputCandidacyDate" name="candidacyDate" required>
        </div>
        <div class="form-group col-md-4">
          <label for="inputCommunityDate">Date Entered Community</label>
          <input type="date" class="form-control" id="inputCommunityDate" name="communityDate">
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <label for="inputPermanentAddress">Permanent Address</label>
          <div class="form-group" id="inputPermanentAddress">
            <div class="form-row">
              <div class="form-group col-md-2">
                <label for="inputHouseNumber1">No.</label>
                <input type="text" class="form-control" id="inputHouseNumber1" placeholder="House Number"
                  name="houseNumber1" required>
              </div>
              <div class="form-group col-md-10">
                <label for="inputStreet1">Street</label>
                <input type="text" class="form-control" id="inputStreet1" placeholder="Street Name" name="street1"
                  required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputWard1">Ward</label>
                <input type="text" class="form-control" id="inputWard1" name="ward1" required>
              </div>
              <div class="form-group col-md-6">
                <label for="inputDistrict1">District</label>
                <input type="text" class="form-control" id="inputDistrict1" name="district1" required>
              </div>
              <div class="form-group col-md-6">
                <label for="inputCity1">City</label>
                <input type="text" class="form-control" id="inputCity1" name="city1" required>
              </div>
              <div class="form-group col-md-6">
                <label for="inputRegion">Region</label>
                <select id="inputRegion" class="form-control" name="region" required>
                  <option selected>Northern</option>
                  <option>Central</option>
                  <option>Southern</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="form-group col-md-12">
            <label for="inputCommunity">Community</label>
            <select id="inputCommunity" class="form=control" name="community">
              <option selected>Select a Community</option>
              <% for (var i=0; i<communityNames.length; i++) { %>
              <option><%= communityNames[i] %></option>
              <% } %>
            </select>
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Add</button>
    </form>


    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Import Candidate via CSV</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form id="fileForm">
              <div class="form-group">
                <label for="file">
                  <h4>Import Candidates from CSV</h4>
                </label>
                <input type="file" class="form-control-file" id="file">
              </div>
              <button type="button" onclick="importFile()" id="importAddButton" class="btn btn-primary">Add</button>
            </form>
          </div>
        </div>
      </div>
    </div>



  </div>

  <script>
    function importFile() {
      var formData = new FormData();
      formData.append('file', document.querySelector('#file').files[0]);

      $.ajax({
        url: '/addcandidate/import',
        type: 'POST',
        data: formData,
        processData: false,  // tell jQuery not to process the data
        contentType: false,  // tell jQuery not to set contentType
        success: function (data) {
          window.location.pathname = '/candidates'
          console.log(data.message);
        },
        error: function (err) {
          console.log("err: " + err);
        }
      });
    }     
  </script>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
</body>